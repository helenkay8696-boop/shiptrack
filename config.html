<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è½¨è¿¹ç®¡ç†</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
        }

        .layout {
            display: flex;
            min-height: 100vh;
        }

        /* å·¦ä¾§å¯¼èˆªæ  */
        .sidebar {
            width: 200px;
            background: #001529;
            color: #fff;
            flex-shrink: 0;
        }

        .sidebar-logo {
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            font-weight: 600;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-menu {
            padding: 12px 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 12px 24px;
            color: rgba(255, 255, 255, 0.65);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .menu-item:hover {
            color: #fff;
            background: rgba(255, 255, 255, 0.05);
        }

        .menu-item.active {
            color: #fff;
            background: #1890ff;
        }

        .menu-item .icon {
            margin-right: 10px;
            font-size: 16px;
        }

        /* å³ä¾§å†…å®¹åŒº */
        .main-content {
            flex: 1;
            padding: 20px;
            overflow: auto;
        }

        .container {
            background: #fff;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .header {
            padding: 16px 20px;
            border-bottom: 1px solid #e8e8e8;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            font-size: 16px;
            font-weight: 500;
            color: #333;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 6px 16px;
            font-size: 13px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            cursor: pointer;
            background: #fff;
            transition: all 0.2s;
        }

        .btn:hover {
            border-color: #40a9ff;
            color: #40a9ff;
        }

        .btn-primary {
            background: #1890ff;
            border-color: #1890ff;
            color: #fff;
        }

        .btn-primary:hover {
            background: #40a9ff;
            border-color: #40a9ff;
            color: #fff;
        }

        .config-table {
            width: 100%;
            border-collapse: collapse;
        }

        .config-table th,
        .config-table td {
            padding: 10px 12px;
            border: 1px solid #e8e8e8;
            text-align: left;
            font-size: 13px;
        }

        .config-table thead th {
            background: #fafafa;
            color: #666;
            font-weight: 500;
            white-space: nowrap;
        }

        .config-table tbody td {
            color: #333;
        }

        .config-table tbody tr:hover {
            background: #fafafa;
        }

        select,
        input[type="text"],
        input[type="datetime-local"] {
            padding: 4px 8px;
            font-size: 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            width: 100%;
            min-width: 80px;
        }

        select:focus,
        input:focus {
            outline: none;
            border-color: #40a9ff;
        }

        .checkbox-cell {
            text-align: center;
        }

        input[type="checkbox"] {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .row-number {
            text-align: center;
            color: #999;
        }

        .auto-text {
            color: #333;
            font-size: 13px;
            display: block;
            min-height: 18px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 36px;
            height: 20px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: 0.3s;
            border-radius: 20px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 14px;
            width: 14px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: 0.3s;
            border-radius: 50%;
        }

        .switch input:checked+.slider {
            background-color: #1890ff;
        }

        .switch input:checked+.slider:before {
            transform: translateX(16px);
        }

        .btn-icon {
            width: 20px;
            height: 20px;
            padding: 0;
            background: none;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .btn-add svg {
            width: 18px;
            height: 18px;
            color: #1890ff;
        }

        .btn-add:hover svg {
            color: #40a9ff;
        }

        .btn-delete svg {
            width: 16px;
            height: 16px;
            color: #ff4d4f;
        }

        .btn-delete:hover svg {
            color: #ff7875;
        }

        .action-cell {
            text-align: center;
            white-space: nowrap;
        }

        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            background: #52c41a;
            color: #fff;
            border-radius: 4px;
            font-size: 13px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            animation: fadeIn 0.3s;
            z-index: 1000;
        }

        .toast.error {
            background: #ff4d4f;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* æ·»åŠ è½¨è¿¹èŠ‚ç‚¹è¡¨å• */
        .form-content {
            padding: 40px 60px;
            max-width: 800px;
            margin: 0 auto;
        }

        .form-item {
            margin-bottom: 24px;
            display: flex;
            align-items: center;
        }

        .form-label {
            width: 120px;
            flex-shrink: 0;
            font-size: 14px;
            color: #333;
            font-weight: 400;
            white-space: nowrap;
        }

        .form-label .required {
            color: #ff4d4f;
            margin-left: 2px;
        }

        .form-input {
            flex: 1;
            padding: 10px 12px;
            font-size: 14px;
            border: 1px solid #d9d9d9;
            border-radius: 2px;
            background: #fff;
        }

        .form-input:focus {
            outline: none;
            border-color: #40a9ff;
        }

        .form-input::placeholder {
            color: #ff7875;
        }

        .readonly-field {
            flex: 1;
            padding: 10px 12px;
            font-size: 14px;
            border: 1px solid #d9d9d9;
            border-radius: 2px;
            background: #fafafa;
            color: #333;
            min-height: 40px;
        }

        .form-actions {
            padding: 20px 60px;
            border-top: 1px solid #e8e8e8;
            text-align: right;
        }

        .demo-content {
            padding: 40px;
        }

        .demo-tips {
            color: #999;
            font-size: 14px;
        }
    </style>
</head>

<body>
    <div id="app">
        <div class="layout">
            <!-- å·¦ä¾§å¯¼èˆªæ  -->
            <div class="sidebar">
                <div class="sidebar-logo">ğŸ“¦ äºšé©¬é€Šshiptrack</div>
                <div class="sidebar-menu">
                    <div class="menu-item" :class="{ active: currentPage === 'config' }"
                        @click="currentPage = 'config'">
                        <span class="icon">âš™ï¸</span>
                        <span>è½¨è¿¹çŠ¶æ€é…ç½®</span>
                    </div>
                    <div class="menu-item" :class="{ active: currentPage === 'add' }" @click="currentPage = 'add'">
                        <span class="icon">ğŸ“</span>
                        <span>æ·»åŠ è½¨è¿¹èŠ‚ç‚¹</span>
                    </div>
                    <div class="menu-item" :class="{ active: currentPage === 'demo' }" @click="currentPage = 'demo'">
                        <span class="icon">ğŸš€</span>
                        <span>æ½æ”¶æ¨é€å­—æ®µ</span>
                    </div>
                    <div class="menu-item" :class="{ active: currentPage === 'departure' }"
                        @click="currentPage = 'departure'">
                        <span class="icon">ğŸš¢</span>
                        <span>ç¦»æ¸¯æ¨é€å­—æ®µ</span>
                    </div>
                    <div class="menu-item" :class="{ active: currentPage === 'delivery' }"
                        @click="currentPage = 'delivery'">
                        <span class="icon">ğŸšš</span>
                        <span>æ´¾é€æ¨é€å­—æ®µ</span>
                    </div>
                    <div class="menu-item" :class="{ active: currentPage === 'booking' }"
                        @click="currentPage = 'booking'">
                        <span class="icon">ğŸ“¦</span>
                        <span>çº¦ä»“æ¨é€å­—æ®µ</span>
                    </div>
                </div>
            </div>

            <!-- å³ä¾§å†…å®¹åŒº -->
            <div class="main-content">
                <div class="container">
                    <!-- é…ç½®é¡µé¢ -->
                    <div v-if="currentPage === 'config'">
                        <div class="header">
                            <h1>è½¨è¿¹çŠ¶æ€é…ç½®</h1>
                            <div class="header-actions">
                                <button class="btn" @click="resetConfig">é‡ç½®</button>
                                <button class="btn btn-primary" @click="saveConfig">ä¿å­˜é…ç½®</button>
                            </div>
                        </div>

                        <table class="config-table">
                            <thead>
                                <tr>
                                    <th class="action-cell">+</th>
                                    <th>#</th>
                                    <th>è½¨è¿¹çŠ¶æ€</th>
                                    <th>çŠ¶æ€ç¼–ç </th>
                                    <th>è½¨è¿¹åç§°</th>
                                    <th>è½¨è¿¹ç¼–ç </th>
                                    <th>èŠ‚ç‚¹</th>
                                    <th>æ¸¯å‰/æ¸¯å</th>
                                    <th>æ˜¯å¦å¯ç”¨</th>
                                    <th class="action-cell">åˆ é™¤</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="(item, index) in configItems" :key="item.id">
                                    <td class="action-cell">
                                        <button class="btn-icon btn-add" @click="addRow(index)" title="æ–°å¢è¡Œ">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <circle cx="12" cy="12" r="10" />
                                                <line x1="12" y1="8" x2="12" y2="16" />
                                                <line x1="8" y1="12" x2="16" y2="12" />
                                            </svg>
                                        </button>
                                    </td>
                                    <td class="row-number">{{ index + 1 }}</td>
                                    <td>
                                        <select v-model="item.status" @change="onStatusChange(item)">
                                            <option value="">è¯·é€‰æ‹©</option>
                                            <option v-for="opt in statusOptions" :key="opt.value" :value="opt.value">
                                                {{ opt.label }}
                                            </option>
                                        </select>
                                    </td>
                                    <td><span class="auto-text">{{ item.statusCode || '-' }}</span></td>
                                    <td>
                                        <span v-if="isDefaultTrack(item.trackName)" class="auto-text">{{ item.trackName
                                            }}</span>
                                        <select v-else v-model="item.trackName" @change="onTrackNameChange(item)">
                                            <option value="">è¯·é€‰æ‹©</option>
                                            <option v-for="opt in trackNameOptions" :key="opt.value" :value="opt.value">
                                                {{ opt.label }}
                                            </option>
                                        </select>
                                    </td>
                                    <td><span class="auto-text">{{ item.trackCode || '-' }}</span></td>
                                    <td><span class="auto-text">{{ item.node || '-' }}</span></td>
                                    <td><span class="auto-text">{{ item.portType || '-' }}</span></td>
                                    <td class="checkbox-cell">
                                        <label class="switch">
                                            <input type="checkbox" v-model="item.enabled"
                                                @change="onEnabledChange(item)">
                                            <span class="slider"></span>
                                        </label>
                                    </td>
                                    <td class="action-cell">
                                        <button v-if="!isDefaultTrack(item.trackName)" class="btn-icon btn-delete"
                                            @click="deleteRow(index)" title="åˆ é™¤è¡Œ">
                                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                                <path
                                                    d="M3 6h18M8 6V4a2 2 0 012-2h4a2 2 0 012 2v2m3 0v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6h14zM10 11v6M14 11v6" />
                                            </svg>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- æ·»åŠ è½¨è¿¹èŠ‚ç‚¹é¡µé¢ -->
                    <div v-if="currentPage === 'add'">
                        <div class="header">
                            <h1>æ·»åŠ è½¨è¿¹èŠ‚ç‚¹</h1>
                        </div>
                        <div class="form-content">
                            <div class="form-item">
                                <label class="form-label">è½¨è¿¹çŠ¶æ€<span class="required">*</span></label>
                                <select class="form-input" v-model="nodeForm.trackStatus"
                                    @change="onNodeTrackStatusChange">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option v-for="s in enabledTrackOptions" :key="s.status" :value="s.status">{{
                                        s.statusLabel }}</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label">è½¨è¿¹åç§°</label>
                                <div class="readonly-field">{{ nodeForm.trackNameDisplay || '-' }}</div>
                            </div>
                            <div class="form-item">
                                <label class="form-label">æ—¶é—´<span class="required">*</span></label>
                                <input type="datetime-local" class="form-input" v-model="nodeForm.time"
                                    :max="currentDateTime" :min="minDateTime">
                            </div>
                            <div class="form-item">
                                <label class="form-label">å›½å®¶<span class="required">*</span></label>
                                <select class="form-input" v-model="nodeForm.country" @change="onCountryChange">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option v-for="c in countryOptions" :key="c.value" :value="c.value">{{ c.label }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label">åŸå¸‚<span class="required">*</span></label>
                                <select class="form-input" v-model="nodeForm.city">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option v-for="c in cityOptions" :key="c.value" :value="c.value">{{ c.label }}
                                    </option>
                                </select>
                            </div>

                            <div class="form-item" v-if="isYueCang">
                                <label class="form-label" title="ä¸èƒ½æ—©äºå½“æ—¥ï¼Œä¸èƒ½è¶…è¿‡æœªæ¥90å¤©">é¢„ä¼°æŠµè¾¾æ—¶é—´<span
                                        class="required">*</span></label>
                                <input type="datetime-local" class="form-input" v-model="nodeForm.estimatedArrival"
                                    :min="todayDateTime" :max="maxFutureDateTime">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button class="btn" @click="resetNodeForm">å–æ¶ˆ</button>
                            <button class="btn btn-primary" @click="submitNode">ä¿å­˜</button>
                        </div>
                    </div>

                    <!-- æ½æ”¶æ¨é€å­—æ®µé¡µé¢ -->
                    <div v-if="currentPage === 'demo'">
                        <div class="header">
                            <h1>æ½æ”¶æ¨é€å­—æ®µ</h1>
                            <div class="header-actions">
                                <button class="btn btn-primary" @click="pushDemo">æ¨é€</button>
                            </div>
                        </div>
                        <div class="form-content">
                            <div class="form-item">
                                <label class="form-label" title="FBXè®¢å•-æ”¶è´§ä»“åº“">æ½æ”¶ä»“åº“<span class="required">*</span></label>
                                <select class="form-input" v-model="demoForm.warehouse" @change="onWarehouseChange">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option v-for="w in warehouseOptions" :key="w.value" :value="w.value">{{ w.label }}
                                    </option>
                                </select>
                            </div>
                            <div class="form-item" v-if="demoForm.warehouse">
                                <label class="form-label">ä»“åº“ä¿¡æ¯</label>
                                <div class="readonly-field">{{ warehouseInfo }}</div>
                            </div>
                            <div class="form-item">
                                <label class="form-label">å¹²çº¿çº§åˆ«<span class="required">*</span></label>
                                <select class="form-input" v-model="demoForm.lineLevel">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="economy">æ™®çº¿Economy</option>
                                    <option value="standard">å¿«çº¿Standard</option>
                                    <option value="express">ç‰¹å¿«çº¿Express</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="æ”¶è´§æ¸ é“çš„è¿è¾“æ–¹å¼">å¤´ç¨‹è¿è¾“æ–¹å¼<span
                                        class="required">*</span></label>
                                <select class="form-input" v-model="demoForm.headTransport">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="sea">æµ·è¿</option>
                                    <option value="air">ç©ºè¿</option>
                                    <option value="rail">é“è¿</option>
                                    <option value="land">é™†è¿</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label">å°¾ç¨‹æ´¾é€æ–¹å¼<span class="required">*</span></label>
                                <select class="form-input" v-model="demoForm.tailDelivery">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="truck">å¡æ´¾</option>
                                    <option value="express">å¿«é€’æ´¾</option>
                                    <option value="amazon">äºšé©¬é€Šè‡ªæ</option>
                                </select>
                            </div>
                            <!-- å¡æ´¾æ˜¾ç¤ºISAé¢„çº¦å· -->
                            <div class="form-item" v-if="demoForm.tailDelivery === 'truck'">
                                <label class="form-label">ISAé¢„çº¦å·<span class="required">*</span></label>
                                <input type="text" class="form-input" v-model="demoForm.isaNumber"
                                    placeholder="è¯·è¾“å…¥ISAé¢„çº¦å·">
                            </div>
                            <!-- å¿«é€’æ´¾æ˜¾ç¤ºæ‰¿è¿å•†å’Œè½¬å•å· -->
                            <div class="form-item" v-if="demoForm.tailDelivery === 'express'">
                                <label class="form-label">æ‰¿è¿å•†<span class="required">*</span></label>
                                <select class="form-input" v-model="demoForm.carrier">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="ups">UPS</option>
                                    <option value="fedex">Fedex</option>
                                </select>
                            </div>
                            <div class="form-item" v-if="demoForm.tailDelivery === 'express'">
                                <label class="form-label">è½¬å•å·<span class="required">*</span></label>
                                <input type="text" class="form-input" v-model="demoForm.trackingNumber"
                                    placeholder="è¯·è¾“å…¥è½¬å•å·">
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="å³æ”¶è´§æ¸ é“æ—¶æ•ˆæœ€å°å€¼">æœ€çŸ­è¿è¾“æ—¶é—´<span
                                        class="required">*</span></label>
                                <input type="number" class="form-input" v-model="demoForm.minTransitDays" min="0"
                                    max="20" step="0.1" placeholder="å¤©">
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="å³æ”¶è´§æ¸ é“æ—¶æ•ˆæœ€å¤§å€¼">æœ€é•¿è¿è¾“æ—¶é—´<span
                                        class="required">*</span></label>
                                <input type="number" class="form-input" v-model="demoForm.maxTransitDays" min="0"
                                    max="20" step="0.1" placeholder="å¤©">
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="é¢„è®¡åˆ°è¾¾æ—¶é—´ï¼šæ½æ”¶æ—¶é—´+æ”¶è´§æ¸ é“æ—¶æ•ˆ">EDD<span
                                        class="required">*</span></label>
                                <input type="datetime-local" class="form-input" v-model="demoForm.edd">
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="æœºåœºæ˜¯ä¸‰å­—ç ï¼Œæµ·æ¸¯æ˜¯äº”å­—ç ">èµ·è¿æ¸¯<span
                                        class="required">*</span></label>
                                <select class="form-input" v-model="demoForm.originPort">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="PVG">ä¸Šæµ·æµ¦ä¸œæœºåœº PVG</option>
                                    <option value="CAN">å¹¿å·ç™½äº‘æœºåœº CAN</option>
                                    <option value="SZX">æ·±åœ³å®å®‰æœºåœº SZX</option>
                                    <option value="HKG">é¦™æ¸¯å›½é™…æœºåœº HKG</option>
                                    <option value="CNSHA">ä¸Šæµ·æ¸¯ CNSHA</option>
                                    <option value="CNSHE">æ·±åœ³è›‡å£æ¸¯ CNSHE</option>
                                    <option value="CNNGB">å®æ³¢æ¸¯ CNNGB</option>
                                    <option value="CNYTN">ç›ç”°æ¸¯ CNYTN</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="æœºåœºæ˜¯ä¸‰å­—ç ï¼Œæµ·æ¸¯æ˜¯äº”å­—ç ">ç›®çš„æ¸¯<span
                                        class="required">*</span></label>
                                <select class="form-input" v-model="demoForm.destPort">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="LAX">æ´›æ‰çŸ¶æœºåœº LAX</option>
                                    <option value="JFK">çº½çº¦è‚¯å°¼è¿ªæœºåœº JFK</option>
                                    <option value="ORD">èŠåŠ å“¥æœºåœº ORD</option>
                                    <option value="USLAX">æ´›æ‰çŸ¶æ¸¯ USLAX</option>
                                    <option value="USLGB">é•¿æ»©æ¸¯ USLGB</option>
                                    <option value="USNYC">çº½çº¦æ¸¯ USNYC</option>
                                    <option value="USSEA">è¥¿é›…å›¾æ¸¯ USSEA</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label">é¢„è®¡å‡ºå‘æ—¶é—´(ETA)<span class="required">*</span></label>
                                <input type="datetime-local" class="form-input" v-model="demoForm.estDepartureTime">
                            </div>
                            <div class="form-item">
                                <label class="form-label">é¢„è®¡åˆ°è¾¾æ—¶é—´(ETD)<span class="required">*</span></label>
                                <input type="datetime-local" class="form-input" v-model="demoForm.estArrivalTime">
                            </div>
                        </div>
                    </div>

                    <!-- ç¦»æ¸¯æ¨é€å­—æ®µé¡µé¢ -->
                    <div v-if="currentPage === 'departure'">
                        <div class="header">
                            <h1>ç¦»æ¸¯æ¨é€å­—æ®µ(å¦‚æœä¸æ½æ”¶å¡«å†™ä¸€è‡´ï¼Œæ— éœ€æ¨é€)</h1>
                            <div class="header-actions">
                                <button class="btn btn-primary" @click="pushDeparture">æ¨é€</button>
                            </div>
                        </div>
                        <div class="form-content">
                            <div class="form-item">
                                <label class="form-label">å¹²çº¿çº§åˆ«<span class="required">*</span></label>
                                <select class="form-input" v-model="departureForm.lineLevel">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="economy">æ™®çº¿Economy</option>
                                    <option value="standard">å¿«çº¿Standard</option>
                                    <option value="express">ç‰¹å¿«çº¿Express</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="å³æ”¶è´§æ¸ é“æ—¶æ•ˆæœ€å°å€¼">æœ€çŸ­è¿è¾“æ—¶é—´<span
                                        class="required">*</span></label>
                                <input type="number" class="form-input" v-model="departureForm.minTransitDays" min="0"
                                    max="999" step="0.1" placeholder="å¤©">
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="å³æ”¶è´§æ¸ é“æ—¶æ•ˆæœ€å¤§å€¼">æœ€é•¿è¿è¾“æ—¶é—´<span
                                        class="required">*</span></label>
                                <input type="number" class="form-input" v-model="departureForm.maxTransitDays" min="0"
                                    max="999" step="0.1" placeholder="å¤©">
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="é¢„è®¡åˆ°è¾¾æ—¶é—´ï¼šæ½æ”¶æ—¶é—´+æ”¶è´§æ¸ é“æ—¶æ•ˆ">EDD<span
                                        class="required">*</span></label>
                                <input type="datetime-local" class="form-input" v-model="departureForm.edd">
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="æœºåœºæ˜¯ä¸‰å­—ç ï¼Œæµ·æ¸¯æ˜¯äº”å­—ç ">èµ·è¿æ¸¯<span
                                        class="required">*</span></label>
                                <select class="form-input" v-model="departureForm.originPort">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="PVG">ä¸Šæµ·æµ¦ä¸œæœºåœº PVG</option>
                                    <option value="CAN">å¹¿å·ç™½äº‘æœºåœº CAN</option>
                                    <option value="SZX">æ·±åœ³å®å®‰æœºåœº SZX</option>
                                    <option value="HKG">é¦™æ¸¯å›½é™…æœºåœº HKG</option>
                                    <option value="CNSHA">ä¸Šæµ·æ¸¯ CNSHA</option>
                                    <option value="CNSHE">æ·±åœ³è›‡å£æ¸¯ CNSHE</option>
                                    <option value="CNNGB">å®æ³¢æ¸¯ CNNGB</option>
                                    <option value="CNYTN">ç›ç”°æ¸¯ CNYTN</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label" title="æœºåœºæ˜¯ä¸‰å­—ç ï¼Œæµ·æ¸¯æ˜¯äº”å­—ç ">ç›®çš„æ¸¯<span
                                        class="required">*</span></label>
                                <select class="form-input" v-model="departureForm.destPort">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="LAX">æ´›æ‰çŸ¶æœºåœº LAX</option>
                                    <option value="JFK">çº½çº¦è‚¯å°¼è¿ªæœºåœº JFK</option>
                                    <option value="ORD">èŠåŠ å“¥æœºåœº ORD</option>
                                    <option value="USLAX">æ´›æ‰çŸ¶æ¸¯ USLAX</option>
                                    <option value="USLGB">é•¿æ»©æ¸¯ USLGB</option>
                                    <option value="USNYC">çº½çº¦æ¸¯ USNYC</option>
                                    <option value="USSEA">è¥¿é›…å›¾æ¸¯ USSEA</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label">é¢„è®¡å‡ºå‘æ—¶é—´(ETA)<span class="required">*</span></label>
                                <input type="datetime-local" class="form-input"
                                    v-model="departureForm.estDepartureTime">
                            </div>
                            <div class="form-item">
                                <label class="form-label">é¢„è®¡åˆ°è¾¾æ—¶é—´(ETD)<span class="required">*</span></label>
                                <input type="datetime-local" class="form-input" v-model="departureForm.estArrivalTime">
                            </div>
                        </div>
                    </div>

                    <!-- æ´¾é€æ¨é€å­—æ®µé¡µé¢ -->
                    <div v-if="currentPage === 'delivery'">
                        <div class="header">
                            <h1>æ´¾é€æ¨é€å­—æ®µ(å¦‚æœä¸æ½æ”¶å¡«å†™ä¸€è‡´ï¼Œæ— éœ€æ¨é€)</h1>
                            <div class="header-actions">
                                <button class="btn btn-primary" @click="pushDelivery">æ¨é€</button>
                            </div>
                        </div>
                        <div class="form-content">
                            <div class="form-item">
                                <label class="form-label">å°¾ç¨‹æ´¾é€æ–¹å¼<span class="required">*</span></label>
                                <select class="form-input" v-model="deliveryForm.tailDelivery">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="truck">å¡æ´¾</option>
                                    <option value="express">å¿«é€’æ´¾</option>
                                    <option value="amazon">äºšé©¬é€Šè‡ªæ</option>
                                </select>
                            </div>
                            <!-- å¡æ´¾æ˜¾ç¤ºISAé¢„çº¦å· -->
                            <div class="form-item" v-if="deliveryForm.tailDelivery === 'truck'">
                                <label class="form-label">ISAé¢„çº¦å·<span class="required">*</span></label>
                                <input type="text" class="form-input" v-model="deliveryForm.isaNumber"
                                    placeholder="è¯·è¾“å…¥ISAé¢„çº¦å·">
                            </div>
                            <!-- å¿«é€’æ´¾æ˜¾ç¤ºæ‰¿è¿å•†å’Œè½¬å•å· -->
                            <div class="form-item" v-if="deliveryForm.tailDelivery === 'express'">
                                <label class="form-label">æ‰¿è¿å•†<span class="required">*</span></label>
                                <select class="form-input" v-model="deliveryForm.carrier">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="ups">UPS</option>
                                    <option value="fedex">Fedex</option>
                                </select>
                            </div>
                            <div class="form-item" v-if="deliveryForm.tailDelivery === 'express'">
                                <label class="form-label">è½¬å•å·<span class="required">*</span></label>
                                <input type="text" class="form-input" v-model="deliveryForm.trackingNumber"
                                    placeholder="è¯·è¾“å…¥è½¬å•å·">
                            </div>
                        </div>
                    </div>

                    <!-- çº¦ä»“æ¨é€å­—æ®µé¡µé¢ -->
                    <div v-if="currentPage === 'booking'">
                        <div class="header">
                            <h1>çº¦ä»“æ¨é€å­—æ®µ(å¡æ´¾/Amazon Freight è®¾ç½®)</h1>
                            <div class="header-actions">
                                <button class="btn btn-primary" @click="pushBooking">æ¨é€</button>
                            </div>
                        </div>
                        <div class="form-content">
                            <div class="form-item">
                                <label class="form-label">å•å·ç±»å‹<span class="required">*</span></label>
                                <select class="form-input" v-model="bookingForm.orderType">
                                    <option value="">è¯·é€‰æ‹©</option>
                                    <option value="isaId">å…¥åº“é¢„çº¦å·isaId</option>
                                    <option value="amazonFreightOrderId">äºšé©¬é€Šè´§è¿è®¢å•å·amazonFreightOrderId</option>
                                </select>
                            </div>
                            <div class="form-item">
                                <label class="form-label">å•å·<span class="required">*</span></label>
                                <input type="text" class="form-input" v-model="bookingForm.orderNumber"
                                    placeholder="è¯·è¾“å…¥å•å·">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="toast.show" class="toast" :class="{ error: toast.isError }">{{ toast.message }}</div>
    </div>

    <script>
        const { createApp, reactive, ref, computed, onMounted } = Vue

        createApp({
            setup() {
                let idCounter = 1
                const currentPage = ref('config')

                const createEmptyRow = () => ({
                    id: idCounter++,
                    status: '',
                    statusCode: '',
                    trackName: '',
                    trackCode: '',
                    node: '',
                    portType: '',
                    enabled: false
                })

                const statusOptions = [
                    { label: 'å·²å…¥åº“', value: 'warehoused' },
                    { label: 'å·²å®‰æ’æŠ¥å…³', value: 'customs_arranged' },
                    { label: 'å·²å‡ºå£æ”¾è¡Œ', value: 'export_released' },
                    { label: 'å·²ç¦»æ¸¯-æµ·ç©º', value: 'departed_air' },
                    { label: 'å·²ç¦»æ¸¯-é™†é“', value: 'departed_rail' },
                    { label: 'å·²å‘è½¦', value: 'dispatched' },
                    { label: 'å·²åˆ°æ¸¯-ç©ºè¿', value: 'arrived_air' },
                    { label: 'å·²åˆ°æ¸¯-æµ·è¿', value: 'arrived_sea' },
                    { label: 'å·²åˆ°æ¸¯-é“è¿/å¡èˆª', value: 'arrived_rail' },
                    { label: 'å·²å®‰æ’æ¸…å…³', value: 'clearance_arranged' },
                    { label: 'å·²è¿›å£æ”¾è¡Œ', value: 'import_released' },
                    { label: 'å·²æ‹†æŸœ', value: 'unpacked' },
                    { label: 'å·²çº¦ä»“', value: 'warehouse_booked' },
                    { label: 'å·²é€ä»“', value: 'delivered_warehouse' },
                    { label: 'åˆ†æ‰¹é€ä»“', value: 'batch_delivery' },
                ]

                const trackData = [
                    { name: 'æ½æ”¶', code: 'AF/NS', node: 'æ½æ”¶', portType: 'æ¸¯å‰' },
                    { name: 'å‡ºå£æŠ¥å…³', code: 'K1/O1', node: 'æŠ¥å…³', portType: 'æ¸¯å‰' },
                    { name: 'å‡ºå£æ”¾è¡Œ', code: 'K2/O2', node: 'æŠ¥å…³', portType: 'æ¸¯å‰' },
                    { name: 'ç¦»æ¸¯-æµ·ç©º', code: 'VD/NS', node: 'å¹²çº¿', portType: 'æ¸¯å‰' },
                    { name: 'ç¦»æ¸¯-é™†é“', code: 'AL/NS', node: 'å¹²çº¿', portType: 'æ¸¯å‰' },
                    { name: 'åˆ°æ¸¯-æµ·è¿', code: 'VA/NS', node: 'å¹²çº¿', portType: 'æ¸¯å' },
                    { name: 'åˆ°æ¸¯-ç©ºè¿', code: 'K1/AJ', node: 'å¹²çº¿', portType: 'æ¸¯å' },
                    { name: 'åˆ°æ¸¯ -é™†é“', code: 'UR/NS', node: 'å¹²çº¿', portType: 'æ¸¯å' },
                    { name: 'è¿›å£æŠ¥å…³', code: 'K1/RD', node: 'æŠ¥å…³', portType: 'æ¸¯å' },
                    { name: 'è¿›å£æ”¾è¡Œ', code: 'K2/RD', node: 'æŠ¥å…³', portType: 'æ¸¯å' },
                    { name: 'æ‹†æŸœ', code: 'X4/FN', node: 'æµ·å¤–ä»“', portType: 'æ¸¯å' },
                    { name: 'çº¦ä»“', code: 'AG/AG', node: 'æµ·å¤–ä»“', portType: 'æ¸¯å' },
                    { name: 'é€ä»“', code: 'D1/NS', node: 'æµ·å¤–ä»“', portType: 'æ¸¯å' },
                    { name: 'åˆ†æ‰¹é€ä»“', code: '1X/NS', node: 'æµ·å¤–ä»“', portType: 'æ¸¯å' },
                ]

                const defaultTrackNames = ['æ½æ”¶', 'å‡ºå£æ”¾è¡Œ', 'ç¦»æ¸¯-æµ·ç©º', 'ç¦»æ¸¯-é™†é“', 'åˆ°æ¸¯-æµ·è¿', 'åˆ°æ¸¯-ç©ºè¿', 'åˆ°æ¸¯ -é™†é“', 'è¿›å£æ”¾è¡Œ', 'æ‹†æŸœ', 'çº¦ä»“', 'é€ä»“']

                const trackNameOptions = trackData
                    .filter(t => !defaultTrackNames.includes(t.name))
                    .map(t => ({ label: t.name, value: t.name }))

                const createDefaultRows = () => {
                    return defaultTrackNames.map(name => {
                        const info = trackData.find(t => t.name === name)
                        return {
                            id: idCounter++,
                            status: '',
                            statusCode: '',
                            trackName: name,
                            trackCode: info ? info.code : '',
                            node: info ? info.node : '',
                            portType: info ? info.portType : '',
                            enabled: true
                        }
                    })
                }

                const configItems = reactive(createDefaultRows())
                const toast = reactive({ show: false, message: '', isError: false })

                const showToast = (msg, isError = false) => {
                    toast.message = msg
                    toast.isError = isError
                    toast.show = true
                    setTimeout(() => { toast.show = false }, 2000)
                }

                const isDefaultTrack = (trackName) => defaultTrackNames.includes(trackName)

                const onStatusChange = (item) => { item.statusCode = item.status }

                const onTrackNameChange = (item) => {
                    const info = trackData.find(t => t.name === item.trackName)
                    if (info) {
                        item.trackCode = info.code
                        item.node = info.node
                        item.portType = info.portType
                    } else {
                        item.trackCode = ''
                        item.node = ''
                        item.portType = ''
                    }
                }

                const onEnabledChange = (changedItem) => {
                    if (isDefaultTrack(changedItem.trackName)) {
                        configItems.forEach(item => {
                            if (isDefaultTrack(item.trackName)) {
                                item.enabled = changedItem.enabled
                            }
                        })
                    }
                }

                const addRow = (index) => { configItems.splice(index + 1, 0, createEmptyRow()) }
                const deleteRow = (index) => { configItems.splice(index, 1) }

                const loadConfig = () => {
                    const saved = localStorage.getItem('track-config')
                    if (saved) {
                        const data = JSON.parse(saved)
                        configItems.length = 0
                        data.forEach(item => { configItems.push({ ...item, id: idCounter++ }) })
                        if (configItems.length === 0) { configItems.push(createEmptyRow()) }
                    }
                }

                const saveConfig = () => {
                    const requiredTracks = ['æ½æ”¶', 'å‡ºå£æ”¾è¡Œ', 'è¿›å£æ”¾è¡Œ', 'æ‹†æŸœ', 'çº¦ä»“', 'é€ä»“']
                    const departGroup = ['ç¦»æ¸¯-æµ·ç©º', 'ç¦»æ¸¯-é™†é“']
                    const arriveGroup = ['åˆ°æ¸¯-æµ·è¿', 'åˆ°æ¸¯-ç©ºè¿', 'åˆ°æ¸¯ -é™†é“']

                    const trackNames = configItems.filter(i => i.trackName).map(i => i.trackName)
                    const duplicateTrackName = trackNames.find((name, idx) => trackNames.indexOf(name) !== idx)
                    if (duplicateTrackName) {
                        showToast(`è½¨è¿¹åç§° "${duplicateTrackName}" é‡å¤`, true)
                        return
                    }

                    const statuses = configItems.filter(i => i.status).map(i => i.status)
                    const duplicateStatus = statuses.find((s, idx) => statuses.indexOf(s) !== idx)
                    if (duplicateStatus) {
                        const label = statusOptions.find(o => o.value === duplicateStatus)?.label || duplicateStatus
                        showToast(`è½¨è¿¹çŠ¶æ€ "${label}" é‡å¤`, true)
                        return
                    }

                    for (const trackName of requiredTracks) {
                        const item = configItems.find(i => i.trackName === trackName)
                        if (!item || !item.status) {
                            showToast(`è¯·å¡«å†™ "${trackName}" çš„è½¨è¿¹çŠ¶æ€`, true)
                            return
                        }
                    }

                    if (!configItems.some(i => departGroup.includes(i.trackName) && i.status)) {
                        showToast('è¯·è‡³å°‘å¡«å†™ "ç¦»æ¸¯-æµ·ç©º" æˆ– "ç¦»æ¸¯-é™†é“" å…¶ä¸­ä¸€é¡¹', true)
                        return
                    }

                    if (!configItems.some(i => arriveGroup.includes(i.trackName) && i.status)) {
                        showToast('è¯·è‡³å°‘å¡«å†™ "åˆ°æ¸¯" ç±»å‹å…¶ä¸­ä¸€é¡¹', true)
                        return
                    }

                    localStorage.setItem('track-config', JSON.stringify(configItems))
                    showToast('âœ“ é…ç½®å·²ä¿å­˜')
                }

                const resetConfig = () => {
                    configItems.length = 0
                    createDefaultRows().forEach(row => configItems.push(row))
                    localStorage.removeItem('track-config')
                    showToast('é…ç½®å·²é‡ç½®')
                }

                // ========== æ·»åŠ è½¨è¿¹èŠ‚ç‚¹ ==========
                const nodeForm = reactive({
                    time: '',
                    country: '',
                    city: '',
                    trackStatus: '',
                    trackNameDisplay: ''
                })

                const countryOptions = [
                    { label: 'ä¸­å›½', value: 'CN' },
                    { label: 'ç¾å›½', value: 'US' },
                    { label: 'è‹±å›½', value: 'UK' },
                    { label: 'å¾·å›½', value: 'DE' },
                    { label: 'æ—¥æœ¬', value: 'JP' },
                    { label: 'æ¾³å¤§åˆ©äºš', value: 'AU' },
                ]

                const cityData = {
                    CN: [{ label: 'æ·±åœ³', value: 'SZ' }, { label: 'å¹¿å·', value: 'GZ' }, { label: 'ä¸Šæµ·', value: 'SH' }, { label: 'åŒ—äº¬', value: 'BJ' }, { label: 'é¦™æ¸¯', value: 'HK' }],
                    US: [{ label: 'æ´›æ‰çŸ¶', value: 'LA' }, { label: 'çº½çº¦', value: 'NY' }, { label: 'èŠåŠ å“¥', value: 'CHI' }],
                    UK: [{ label: 'ä¼¦æ•¦', value: 'LDN' }, { label: 'æ›¼å½»æ–¯ç‰¹', value: 'MAN' }],
                    DE: [{ label: 'æŸæ—', value: 'BER' }, { label: 'æ³•å…°å…‹ç¦', value: 'FRA' }],
                    JP: [{ label: 'ä¸œäº¬', value: 'TKY' }, { label: 'å¤§é˜ª', value: 'OSK' }],
                    AU: [{ label: 'æ‚‰å°¼', value: 'SYD' }, { label: 'å¢¨å°”æœ¬', value: 'MEL' }],
                }

                const cityOptions = ref([])

                const onCountryChange = () => {
                    nodeForm.city = ''
                    cityOptions.value = cityData[nodeForm.country] || []
                }

                const enabledTrackOptions = computed(() => {
                    return configItems
                        .filter(item => item.enabled && item.status && item.trackName)
                        .map(item => ({
                            status: item.status,
                            statusLabel: statusOptions.find(o => o.value === item.status)?.label || item.status,
                            trackName: item.trackName,
                            trackCode: item.trackCode
                        }))
                })

                const onNodeTrackStatusChange = () => {
                    const selected = enabledTrackOptions.value.find(s => s.status === nodeForm.trackStatus)
                    nodeForm.trackNameDisplay = selected ? `${selected.trackName} (${selected.trackCode})` : ''
                }

                // æ˜¯å¦é€‰æ‹©äº†çº¦ä»“
                const isYueCang = computed(() => {
                    const selected = enabledTrackOptions.value.find(s => s.status === nodeForm.trackStatus)
                    return selected && selected.trackName === 'çº¦ä»“'
                })

                const resetNodeForm = () => {
                    nodeForm.time = ''
                    nodeForm.country = ''
                    nodeForm.city = ''
                    nodeForm.trackStatus = ''
                    nodeForm.trackNameDisplay = ''
                    nodeForm.estimatedArrival = ''
                    cityOptions.value = []
                }

                const submitNode = () => {
                    if (!nodeForm.time) { showToast('è¯·é€‰æ‹©æ—¶é—´', true); return }
                    if (!nodeForm.country) { showToast('è¯·é€‰æ‹©å›½å®¶', true); return }
                    if (!nodeForm.city) { showToast('è¯·é€‰æ‹©åŸå¸‚', true); return }
                    if (!nodeForm.trackStatus) { showToast('è¯·é€‰æ‹©è½¨è¿¹çŠ¶æ€', true); return }
                    if (isYueCang.value && !nodeForm.estimatedArrival) { showToast('è¯·é€‰æ‹©é¢„ä¼°æŠµè¾¾æ—¶é—´', true); return }

                    const trackNodes = JSON.parse(localStorage.getItem('track-nodes') || '[]')
                    trackNodes.push({ id: Date.now(), ...nodeForm, createdAt: new Date().toISOString() })
                    localStorage.setItem('track-nodes', JSON.stringify(trackNodes))

                    showToast('âœ“ è½¨è¿¹èŠ‚ç‚¹å·²æ·»åŠ ')
                    resetNodeForm()
                }

                onMounted(() => loadConfig())

                // å½“å‰æ—¶é—´ï¼ˆç”¨äºé™åˆ¶æ—¥æœŸé€‰æ‹©ï¼‰
                const currentDateTime = computed(() => {
                    const now = new Date()
                    return now.toISOString().slice(0, 16)
                })

                // æœ€å°æ—¶é—´é™åˆ¶
                const minDateTime = computed(() => {
                    const selected = enabledTrackOptions.value.find(s => s.status === nodeForm.trackStatus)
                    if (selected) {
                        const trackName = selected.trackName
                        let hoursLimit = 0

                        // æ½æ”¶ã€ç¦»æ¸¯ã€åˆ°æ¸¯ï¼š24å°æ—¶
                        if (trackName === 'æ½æ”¶' || trackName.includes('ç¦»æ¸¯') || trackName.includes('åˆ°æ¸¯')) {
                            hoursLimit = 24
                        }
                        // å‡ºå£æ”¾è¡Œã€è¿›å£æ”¾è¡Œã€æ‹†æŸœã€çº¦ä»“ï¼š48å°æ—¶
                        else if (trackName === 'å‡ºå£æ”¾è¡Œ' || trackName === 'è¿›å£æ”¾è¡Œ' || trackName === 'æ‹†æŸœ' || trackName === 'çº¦ä»“') {
                            hoursLimit = 48
                        }
                        // é€ä»“ï¼š72å°æ—¶
                        else if (trackName === 'é€ä»“') {
                            hoursLimit = 72
                        }

                        if (hoursLimit > 0) {
                            const minTime = new Date(Date.now() - hoursLimit * 60 * 60 * 1000)
                            return minTime.toISOString().slice(0, 16)
                        }
                    }
                    return ''
                })

                // ä»Šæ—¥æ—¥æœŸï¼ˆç”¨äºé¢„ä¼°æŠµè¾¾æ—¶é—´æœ€å°å€¼ï¼‰
                const todayDateTime = computed(() => {
                    const now = new Date()
                    now.setHours(0, 0, 0, 0)
                    return now.toISOString().slice(0, 16)
                })

                // æœªæ¥90å¤©ï¼ˆç”¨äºé¢„ä¼°æŠµè¾¾æ—¶é—´æœ€å¤§å€¼ï¼‰
                const maxFutureDateTime = computed(() => {
                    const future = new Date(Date.now() + 90 * 24 * 60 * 60 * 1000)
                    return future.toISOString().slice(0, 16)
                })

                // ========== æ½æ”¶æ¨é€å­—æ®µ ==========
                const demoForm = reactive({
                    warehouse: '',
                    lineLevel: '',
                    headTransport: '',
                    tailDelivery: '',
                    isaNumber: '',
                    carrier: '',
                    trackingNumber: '',
                    minTransitDays: '',
                    maxTransitDays: '',
                    edd: '',
                    originPort: '',
                    destPort: '',
                    estDepartureTime: '',
                    estArrivalTime: ''
                })

                const warehouseOptions = [
                    { label: 'æ·±åœ³ä»“', value: 'sz', country: 'ä¸­å›½', province: 'å¹¿ä¸œçœ', city: 'æ·±åœ³å¸‚' },
                    { label: 'å¹¿å·ä»“', value: 'gz', country: 'ä¸­å›½', province: 'å¹¿ä¸œçœ', city: 'å¹¿å·å¸‚' },
                    { label: 'ä¸Šæµ·ä»“', value: 'sh', country: 'ä¸­å›½', province: 'ä¸Šæµ·å¸‚', city: 'ä¸Šæµ·å¸‚' },
                    { label: 'æ´›æ‰çŸ¶ä»“', value: 'la', country: 'ç¾å›½', province: 'åŠ åˆ©ç¦å°¼äºšå·', city: 'æ´›æ‰çŸ¶' },
                    { label: 'çº½çº¦ä»“', value: 'ny', country: 'ç¾å›½', province: 'çº½çº¦å·', city: 'çº½çº¦' },
                ]

                const warehouseInfo = computed(() => {
                    const w = warehouseOptions.find(item => item.value === demoForm.warehouse)
                    return w ? `${w.country} / ${w.province} / ${w.city}` : ''
                })

                const onWarehouseChange = () => {
                    // ä»“åº“å˜æ›´æ—¶çš„å¤„ç†ï¼ˆä¿¡æ¯è‡ªåŠ¨é€šè¿‡ computed æ›´æ–°ï¼‰
                }

                const addDemoNode = () => {
                    if (!demoForm.warehouse) { showToast('è¯·é€‰æ‹©æ½æ”¶ä»“åº“', true); return }
                    if (!demoForm.headTransport) { showToast('è¯·é€‰æ‹©å¤´ç¨‹è¿è¾“æ–¹å¼', true); return }
                    if (!demoForm.tailDelivery) { showToast('è¯·é€‰æ‹©å°¾ç¨‹æ´¾é€æ–¹å¼', true); return }
                    if (!demoForm.edd) { showToast('è¯·é€‰æ‹©EDD', true); return }

                    showToast('âœ“ è½¨è¿¹èŠ‚ç‚¹å·²æ·»åŠ ')
                }

                const pushDemo = () => {
                    if (!demoForm.warehouse) { showToast('è¯·é€‰æ‹©æ½æ”¶ä»“åº“', true); return }
                    if (!demoForm.lineLevel) { showToast('è¯·é€‰æ‹©å¹²çº¿çº§åˆ«', true); return }
                    if (!demoForm.headTransport) { showToast('è¯·é€‰æ‹©å¤´ç¨‹è¿è¾“æ–¹å¼', true); return }
                    if (!demoForm.tailDelivery) { showToast('è¯·é€‰æ‹©å°¾ç¨‹æ´¾é€æ–¹å¼', true); return }
                    // å¡æ´¾éœ€è¦ISAé¢„çº¦å·
                    if (demoForm.tailDelivery === 'truck' && !demoForm.isaNumber) {
                        showToast('è¯·è¾“å…¥ISAé¢„çº¦å·', true); return
                    }
                    // å¿«é€’æ´¾éœ€è¦æ‰¿è¿å•†å’Œè½¬å•å·
                    if (demoForm.tailDelivery === 'express') {
                        if (!demoForm.carrier) { showToast('è¯·é€‰æ‹©æ‰¿è¿å•†', true); return }
                        if (!demoForm.trackingNumber) { showToast('è¯·è¾“å…¥è½¬å•å·', true); return }
                    }
                    if (!demoForm.minTransitDays) { showToast('è¯·è¾“å…¥æœ€çŸ­è¿è¾“æ—¶é—´', true); return }
                    if (!demoForm.maxTransitDays) { showToast('è¯·è¾“å…¥æœ€é•¿è¿è¾“æ—¶é—´', true); return }
                    if (parseFloat(demoForm.maxTransitDays) < parseFloat(demoForm.minTransitDays)) {
                        showToast('æœ€é•¿è¿è¾“æ—¶é—´ä¸èƒ½å°äºæœ€çŸ­è¿è¾“æ—¶é—´', true); return
                    }
                    if (parseFloat(demoForm.maxTransitDays) - parseFloat(demoForm.minTransitDays) > 20) {
                        showToast('æœ€çŸ­æœ€é•¿è¿è¾“æ—¶é—´å·®å€¼ä¸å¯è¶…è¿‡20', true); return
                    }
                    if (!demoForm.edd) { showToast('è¯·é€‰æ‹©EDD', true); return }
                    if (!demoForm.originPort) { showToast('è¯·é€‰æ‹©èµ·è¿æ¸¯', true); return }
                    if (!demoForm.destPort) { showToast('è¯·é€‰æ‹©ç›®çš„æ¸¯', true); return }
                    if (!demoForm.estDepartureTime) { showToast('è¯·é€‰æ‹©é¢„è®¡å‡ºå‘æ—¶é—´', true); return }
                    if (!demoForm.estArrivalTime) { showToast('è¯·é€‰æ‹©é¢„è®¡åˆ°è¾¾æ—¶é—´', true); return }
                    showToast('âœ“ æ¨é€æˆåŠŸ')
                }

                // ========== ç¦»æ¸¯æ¨é€å­—æ®µ ==========
                const departureForm = reactive({
                    lineLevel: '',
                    minTransitDays: '',
                    maxTransitDays: '',
                    edd: '',
                    originPort: '',
                    destPort: '',
                    estDepartureTime: '',
                    estArrivalTime: ''
                })

                const pushDeparture = () => {
                    if (!departureForm.lineLevel) { showToast('è¯·é€‰æ‹©å¹²çº¿çº§åˆ«', true); return }
                    if (!departureForm.minTransitDays) { showToast('è¯·è¾“å…¥æœ€çŸ­è¿è¾“æ—¶é—´', true); return }
                    if (!departureForm.maxTransitDays) { showToast('è¯·è¾“å…¥æœ€é•¿è¿è¾“æ—¶é—´', true); return }
                    if (parseFloat(departureForm.maxTransitDays) < parseFloat(departureForm.minTransitDays)) {
                        showToast('æœ€é•¿è¿è¾“æ—¶é—´ä¸èƒ½å°äºæœ€çŸ­è¿è¾“æ—¶é—´', true); return
                    }
                    if (parseFloat(departureForm.maxTransitDays) - parseFloat(departureForm.minTransitDays) > 20) {
                        showToast('æœ€çŸ­æœ€é•¿è¿è¾“æ—¶é—´å·®å€¼ä¸å¯è¶…è¿‡20', true); return
                    }
                    if (!departureForm.edd) { showToast('è¯·é€‰æ‹©EDD', true); return }
                    if (!departureForm.originPort) { showToast('è¯·é€‰æ‹©èµ·è¿æ¸¯', true); return }
                    if (!departureForm.destPort) { showToast('è¯·é€‰æ‹©ç›®çš„æ¸¯', true); return }
                    if (!departureForm.estDepartureTime) { showToast('è¯·é€‰æ‹©é¢„è®¡å‡ºå‘æ—¶é—´', true); return }
                    if (!departureForm.estArrivalTime) { showToast('è¯·é€‰æ‹©é¢„è®¡åˆ°è¾¾æ—¶é—´', true); return }
                    showToast('âœ“ æ¨é€æˆåŠŸ')
                }

                // ========== æ´¾é€æ¨é€å­—æ®µ ==========
                const deliveryForm = reactive({
                    tailDelivery: '',
                    isaNumber: '',
                    carrier: '',
                    trackingNumber: ''
                })

                const pushDelivery = () => {
                    if (!deliveryForm.tailDelivery) { showToast('è¯·é€‰æ‹©å°¾ç¨‹æ´¾é€æ–¹å¼', true); return }
                    // å¡æ´¾éœ€è¦ISAé¢„çº¦å·
                    if (deliveryForm.tailDelivery === 'truck' && !deliveryForm.isaNumber) {
                        showToast('è¯·è¾“å…¥ISAé¢„çº¦å·', true); return
                    }
                    // å¿«é€’æ´¾éœ€è¦æ‰¿è¿å•†å’Œè½¬å•å·
                    if (deliveryForm.tailDelivery === 'express') {
                        if (!deliveryForm.carrier) { showToast('è¯·é€‰æ‹©æ‰¿è¿å•†', true); return }
                        if (!deliveryForm.trackingNumber) { showToast('è¯·è¾“å…¥è½¬å•å·', true); return }
                    }
                    showToast('âœ“ æ¨é€æˆåŠŸ')
                }

                // ========== çº¦ä»“æ¨é€å­—æ®µ ==========
                const bookingForm = reactive({
                    orderType: '',
                    orderNumber: ''
                })

                const pushBooking = () => {
                    if (!bookingForm.orderType) { showToast('è¯·é€‰æ‹©å•å·ç±»å‹', true); return }
                    if (!bookingForm.orderNumber) { showToast('è¯·è¾“å…¥å•å·', true); return }
                    showToast('âœ“ æ¨é€æˆåŠŸ')
                }

                return {
                    currentPage,
                    configItems, statusOptions, trackNameOptions, toast,
                    saveConfig, resetConfig, addRow, deleteRow,
                    isDefaultTrack, onStatusChange, onTrackNameChange, onEnabledChange,
                    nodeForm, countryOptions, cityOptions, enabledTrackOptions, currentDateTime, minDateTime, isYueCang, todayDateTime, maxFutureDateTime,
                    onCountryChange, onNodeTrackStatusChange, resetNodeForm, submitNode,
                    demoForm, warehouseOptions, warehouseInfo, onWarehouseChange, addDemoNode, pushDemo,
                    departureForm, pushDeparture,
                    deliveryForm, pushDelivery,
                    bookingForm, pushBooking
                }
            }
        }).mount('#app')
    </script>
</body>

</html>